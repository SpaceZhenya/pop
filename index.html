<!DOCTYPE html>
<html>
<head>
  <title>Offline Long Story Generator</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 900px; margin: auto; padding: 20px; }
    input, select, button { width: 100%; margin: 10px 0; padding: 12px; font-size: 16px; }
    #story { margin-top: 20px; white-space: pre-wrap; background: #f9f9f9; padding: 20px; border-radius: 10px; max-height: 700px; overflow-y: auto; }
    button { background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; }
    button:hover { background: #45a049; }
  </style>
</head>
<body>
  <h1>Offline Long Story Generator</h1>

  <label>Genre:</label>
  <select id="genre">
    <option value="fantasy">Fantasy</option>
    <option value="adventure">Adventure</option>
    <option value="mystery">Mystery</option>
  </select>

  <label>Main character name:</label>
  <input type="text" id="character" placeholder="e.g., Luna the cat">

  <label>Additional characters (optional):</label>
  <input type="text" id="sideCharacters" placeholder="e.g., Merlin, Trixie">

  <label>Story prompt:</label>
  <input type="text" id="prompt" placeholder="The adventure begins">

  <button id="generateBtn">Generate Story</button>
  <button id="copyBtn">Copy Story</button>

  <div id="story"></div>

  <script>
    const storyChunks = {
      fantasy: [
        "awoke in a shimmering forest where magic floated in the air.",
        "found a glowing crystal that pulsed with energy.",
        "met a wise dragon who revealed secrets of the ancient world.",
        "journeyed through mountains and valleys filled with enchanted creatures.",
        "discovered powers within themselves they never knew existed.",
        "returned home, forever changed by the adventures they'd experienced.",
        "faced a dark sorcerer who threatened the entire kingdom.",
        "learned the ancient spells of a hidden library.",
        "befriended magical creatures who guided them through danger.",
        "solved riddles to unlock a secret portal to another realm."
      ],
      adventure: [
        "set sail across stormy seas in search of hidden treasure.",
        "found a mysterious map leading to a secret island.",
        "braved jungles filled with wild animals and ancient ruins.",
        "solved riddles left by explorers long ago.",
        "formed alliances with courageous companions.",
        "emerged victorious, bringing back tales of glory.",
        "navigated treacherous mountains during a fierce storm.",
        "discovered ancient artifacts that held untold powers.",
        "fought rival adventurers who tried to steal their treasures.",
        "rescued a companion trapped in a dangerous temple."
      ],
      mystery: [
        "walked through foggy streets with a cryptic letter in hand.",
        "found hidden clues in abandoned buildings and dusty libraries.",
        "decoded secret messages that led to shocking revelations.",
        "uncovered a plot that had remained hidden for decades.",
        "restored truth and justice to the town.",
        "became a hero known for their cleverness and courage.",
        "followed a trail of footprints that vanished mysteriously.",
        "interviewed suspicious witnesses who told half-truths.",
        "discovered a secret passage beneath the old mansion.",
        "solved a complex puzzle that revealed the criminal mastermind."
      ]
    };

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function generateStory() {
      const genre = document.getElementById('genre').value;
      const character = document.getElementById('character').value || "The hero";
      const sideChars = document.getElementById('sideCharacters').value;
      const prompt = document.getElementById('prompt').value || "";

      const sideCharactersText = sideChars ? ` Side characters include: ${sideChars}.` : "";
      const chunks = [...storyChunks[genre]];
      shuffleArray(chunks);

      // Make the story longer by repeating the shuffled chunks multiple times
      let storyText = `${prompt} ${sideCharactersText} `;
      for (let repeat = 0; repeat < 6; repeat++) {  // Repeat 6 times for longer story
        chunks.forEach(chunk => {
          storyText += `${character} ${chunk} `;
        });
      }

      document.getElementById('story').textContent = storyText;
    }

    document.getElementById('generateBtn').addEventListener('click', generateStory);
    document.getElementById('copyBtn').addEventListener('click', () => {
      const text = document.getElementById('story').textContent;
      navigator.clipboard.writeText(text);
      alert("Story copied to clipboard!");
    });
  </script>
</body>
</html>
